<%
def validate_string(string)
  unless string.nil?
    abort "String may not be empty" if string.empty?
    return true
  end
end
-%>
<% unless @comment.nil? -%>
<% @comment.each do |com| -%>
# <%= com %>
<% end -%>
<% end -%>
<%= @title %>:
  driver          = <%= @driver %>
<% if @delivery_date_add -%>
  delivery_date_add
<% end -%>
<% if @envelope_to_add -%>
  envelope_to_add
<% end -%>
<% if @return_path_add -%>
  return_path_add
<% end -%>
<% if validate_string(@command) -%>
  command         = <%= @command %>
<% end -%>
<% unless @exim_environment.nil? -%>
  environment     = <%= @exim_environment.map {|a| a.to_a.join("=") }.join(" : ") %>
<% end -%>
<% if @log_output -%>
  log_output
<% end -%>
<% if @return_fail_output -%>
  return_fail_output
<% end -%>
<% if @return_output -%>
  return_output
<% end -%>
<% if validate_string (@temp_errors) -%>
  temp_errors     = <%= @temp_errors.join(' : ') %>
<% end -%>
<% if @freeze_exec_fail -%>
  freeze_exec_fail
<% end -%>
<% if validate_string(@connect_timeout) -%>
  connect_timeout = <%= @connect_timeout %>
<% end -%>
<% if @maildir_format -%>
  maildir_format
<% end -%>
<% if validate_string(@maildir_tag) -%>
  maildir_tag     = <%= @maildir_tag %>
<% end -%>
<% if validate_string(@directory) -%>
  directory       = <%= @directory %>
<% end -%>
<% if validate_string(@file) -%>
  file            = <%= @file %>
<% end -%>
<% if validate_string(@mode) -%>
  mode            = <%= @mode %>
<% end -%>
<% if validate_string(@directory_mode) -%>
  directory_mode  = <%= @directory_mode %>
<% end -%>
<% if validate_string(@socket) -%>
  socket          = <%= @socket %>
<% end -%>
<% unless @batch_max.nil?
 abort "could not convert value of batch_max to number greater then 1" if @batch_max.to_i < 1 -%>
  batch_max       = <%= @batch_max.to_i %>
<% end -%>
<% if validate_string(@user) -%>
  user            = <%= @user %>
<% end -%>
<% if validate_string(@group) -%>
  group           = <%= @group %>
<% end -%>
<% if validate_string(@home_directory) -%>
  home_directory  = <%= @home_directory %>
<% end -%>
<% if @initgroups -%>
  initgroups
<% end -%>
<% if @rcpt_include_affixes -%>
  rcpt_include_affixes
<% end -%>
<% unless @headers_remove.nil? -%>
  headers_remove  = <%= @headers_remove.join(":") %>
<% end -%>
<% unless @headers_add.nil? -%>
  headers_add     = <%= @headers_add.join("\\n") %>
<% end -%>
<% if validate_string(@message_prefix) -%>
  message_prefix  = <%= @message_prefix %>
<% end -%>
<% if validate_string(@message_suffix) -%>
  message_suffix  = <%= @message_suffix %>
<% end -%>
<% if validate_string(@transport_filter) -%>
  transport_filter = <%= @transport_filter %>
<% end -%>
<% unless @tls_dh_min_bits.nil? -%>
  tls_dh_min_bits = <%= @tls_dh_min_bits %>
<% end -%>
<% unless @interface.nil? -%>
  interface       = <%= @interface %>
<% end -%>
<% unless @path.nil? -%>
  path            = <%= @path %>
<% end -%>
<% unless @port.nil? -%>
  port            = <%= @port %>
<% end -%>
<% unless @helo_data.nil? -%>
  helo_data       = <%= @helo_data %>
<% end -%>
<% if validate_string(@to) -%>
  to              = <%= @to %>
<% end -%>
<% if validate_string(@subject) -%>
  subject         = <%= @subject %>
<% end -%>
<% if validate_string(@text) -%>
  text            = <%= @text %>
<% end -%>
<% unless @hosts.nil? -%>
  hosts           = <%= @hosts.join(' : ') %>
<% end -%>
<% unless @connection_max_messages.nil? -%>
  connection_max_messages = <%= @connection_max_messages %>
<% end -%>
<% unless @hosts_require_auth.nil? -%>
  hosts_require_auth = <%= @hosts_require_auth.join(' : ') %>
<% end -%>
<% unless @hosts_require_tls.nil? -%>
  hosts_require_tls = <%= @hosts_require_tls.join(' : ') %>
<% end -%>
<% unless @tls_verify_certificates.nil? -%>
  tls_verify_certificates = <%= @tls_verify_certificates %>
<% end -%>
<% unless @fallback_hosts.nil? -%>
  fallback_hosts  = <%= @fallback_hosts.join(' : ') %>
<% end -%>
<% if @allow_localhost -%>
  allow_localhost
<% end -%>
<% unless @timeout.nil? -%>
  timeout         = <%= @timeout %>
<% end -%>
<% if @timeout_defer -%>
  timeout_defer
<% end -%>
